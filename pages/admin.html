<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AngelPoms Admin Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        :root {
            --primary-blue: #003366;
            --accent-blue: #0066cc;
            --accent-gold: #D4AF37;
            --dark-bg: #1a1a1a;
            --light-text: #ffffff;
            --section-bg: #f8f9fa;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--section-bg);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Login Overlay */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .login-container {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            width: 100%;
            max-width: 420px;
            box-shadow: var(--card-shadow);
            text-align: center;
        }

        .login-container h2 {
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #444;
        }

        .form-group input {
            width: 100%;
            padding: 0.9rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--accent-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
        }

        .cta-button {
            background: var(--accent-blue);
            color: white;
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 6px;
            width: 100%;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: var(--transition);
            margin-top: 0.5rem;
        }

        .cta-button:hover {
            background: var(--primary-blue);
            transform: translateY(-2px);
        }

        .error-message {
            color: #dc3545;
            text-align: center;
            margin-top: 1.2rem;
            display: none;
            font-size: 0.9rem;
        }

        /* Dashboard Navigation */
        .dashboard-nav {
            background: linear-gradient(to right, var(--primary-blue), #004080);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-list {
            list-style: none;
            display: flex;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .logo {
            display: flex;
            align-items: center;
            color: white;
            font-weight: 600;
            font-size: 1.4rem;
        }

        .logo i {
            margin-right: 0.5rem;
            font-size: 1.6rem;
        }

        /* Dashboard Content */
        .dashboard {
            padding: 2.5rem;
            max-width: 1300px;
            margin: 0 auto;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-header h2 {
            color: var(--primary-blue);
            font-size: 1.8rem;
        }

        .stat-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .stat-icon.puppy {
            background: rgba(0, 102, 204, 0.15);
            color: var(--accent-blue);
        }

        .stat-icon.stud {
            background: rgba(212, 175, 55, 0.15);
            color: var(--accent-gold);
        }

        .stat-content h3 {
            font-size: 1.8rem;
            margin-bottom: 0.2rem;
        }

        .stat-content p {
            color: #666;
            font-size: 0.95rem;
        }

        /* Form Section */
        .add-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            margin-bottom: 2.5rem;
        }

        .section-title {
            font-size: 1.4rem;
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .type-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .type-btn {
            flex: 1;
            padding: 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-weight: 500;
        }

        .type-btn.active {
            border-color: var(--accent-blue);
            background: rgba(0, 102, 204, 0.05);
            color: var(--accent-blue);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .type-btn i {
            display: block;
            font-size: 2rem;
            margin-bottom: 0.8rem;
            color: var(--accent-blue);
        }

        .type-btn.stud.active i {
            color: var(--accent-gold);
        }

        .type-btn.stud.active {
            border-color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.05);
            color: var(--accent-gold);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .image-preview-container {
            text-align: center;
            margin: 1.5rem 0;
        }

        .image-preview {
            max-width: 100%;
            max-height: 280px;
            border-radius: 10px;
            display: none;
            margin: 0 auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Animal Cards */
        .animal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .animal-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .animal-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .animal-image {
            width: 100%;
            height: 240px;
            object-fit: cover;
            border-bottom: 4px solid var(--accent-blue);
        }

        .stud .animal-image {
            border-color: var(--accent-gold);
        }

        .animal-details {
            padding: 1.5rem;
        }

        .animal-details h3 {
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .animal-type {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
        }

        .type-puppy {
            background: rgba(0, 102, 204, 0.15);
            color: var(--accent-blue);
        }

        .type-stud {
            background: rgba(212, 175, 55, 0.15);
            color: var(--accent-gold);
        }

        .animal-info {
            margin-bottom: 0.8rem;
            color: #555;
        }

        .animal-info span {
            font-weight: 500;
            color: #333;
        }

        .animal-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin: 1rem 0;
            text-align: center;
        }

        .stud .animal-price {
            color: var(--accent-gold);
        }

        .delete-button {
            background: #dc3545;
            color: white;
            padding: 0.7rem 1.5rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            font-weight: 500;
        }

        .delete-button:hover {
            background: #bd2130;
            transform: translateY(-2px);
        }

        /* Selection Modal */
        .selection-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        .modal-content h2 {
            color: var(--primary-blue);
            margin-bottom: 1.5rem;
        }

        .modal-buttons {
            display: flex;
            gap: 1.5rem;
            margin-top: 2rem;
            justify-content: center;
        }

        .modal-btn {
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: var(--transition);
            min-width: 160px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-btn i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .btn-stud {
            background: rgba(212, 175, 55, 0.15);
            color: var(--accent-gold);
        }

        .btn-puppy {
            background: rgba(0, 102, 204, 0.15);
            color: var(--accent-blue);
        }

        .modal-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .btn-stud:hover {
            background: rgba(212, 175, 55, 0.25);
        }

        .btn-puppy:hover {
            background: rgba(0, 102, 204, 0.25);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard {
                padding: 1.5rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .type-selector {
                flex-direction: column;
            }
            
            .modal-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-list {
                gap: 1rem;
            }
            
            .stat-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-container">
            <h2>Admin Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label>Password:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="cta-button">Login</button>
            </form>
            <div class="error-message" id="errorMessage">Invalid credentials</div>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div id="dashboardContent" style="display: none;">
        <nav class="dashboard-nav">
            <div class="logo">
                <i class="fas fa-paw"></i>
                <span>AngelPoms Admin</span>
            </div>
            <ul class="nav-list">
                <li><a href="#" class="nav-link"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link"><i class="fas fa-globe"></i> View Site</a></li>
                <li><button class="cta-button" id="logoutButton"><i class="fas fa-sign-out-alt"></i> Logout</button></li>
            </ul>
        </nav>

        <main class="dashboard">
            <div class="dashboard-header">
                <h2>Dashboard Overview</h2>
                <div class="actions">
                    <button class="cta-button" id="addAnimalBtn"><i class="fas fa-plus"></i> Add New</button>
                </div>
            </div>

            <div class="stat-cards">
                <div class="stat-card">
                    <div class="stat-icon puppy">
                        <i class="fas fa-dog"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="puppyCount">0</h3>
                        <p>Available Puppies</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon stud">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="studCount">0</h3>
                        <p>Stud Dogs</p>
                    </div>
                </div>
            </div>

            <!-- Add Animal Section -->
            <div class="add-section" id="addSection" style="display: none;">
                <h3 class="section-title">Add New Animal</h3>
                
                <div class="type-selector">
                    <div class="type-btn puppy active" data-type="puppy">
                        <i class="fas fa-dog"></i>
                        Add Puppy
                    </div>
                    <div class="type-btn stud" data-type="stud">
                        <i class="fas fa-crown"></i>
                        Add Stud Dog
                    </div>
                </div>
                
                <form id="addAnimalForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" name="name" required>
                        </div>
                        <div class="form-group">
                            <label>Breed:</label>
                            <input type="text" name="breed" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Age:</label>
                            <input type="text" name="age" required>
                        </div>
                        <div class="form-group">
                            <label>Price (£):</label>
                            <input type="number" name="price" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Description:</label>
                        <textarea name="description" class="form-control" rows="3" style="width: 100%; padding: 0.9rem; border: 1px solid #ddd; border-radius: 6px;"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Animal Image:</label>
                        <input type="file" id="animalImage" accept="image/*" required>
                        <div class="image-preview-container">
                            <img class="image-preview" id="imagePreview" alt="Image preview">
                        </div>
                    </div>
                    
                    <button type="submit" class="cta-button">Add Animal</button>
                </form>
            </div>

            <!-- Animal Management -->
            <h3 class="section-title">Manage Animals</h3>
            <div class="animal-grid" id="animalGrid"></div>
        </main>
    </div>

    <!-- Type Selection Modal -->
    <div class="selection-modal" id="selectionModal" style="display: none;">
        <div class="modal-content">
            <h2>What would you like to add?</h2>
            <p>Select the type of animal you want to add to your site</p>
            
            <div class="modal-buttons">
                <button class="modal-btn btn-puppy" id="addPuppyBtn">
                    <i class="fas fa-dog"></i>
                    Add a Puppy
                </button>
                <button class="modal-btn btn-stud" id="addStudBtn">
                    <i class="fas fa-crown"></i>
                    Add a Stud Dog
                </button>
            </div>
        </div>
    </div>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDrmpMXUZpJ46n-eRiDjQJSJf-YK6whUEM",
            authDomain: "prom-dog.firebaseapp.com",
            projectId: "prom-dog",
            storageBucket: "prom-dog.appspot.com",
            messagingSenderId: "945953941353",
            appId: "1:945953941353:web:e6272892f5352c004b7ff8",
            measurementId: "G-WMGY01WT20"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const puppiesCollection = db.collection('puppies');
        const studDogsCollection = db.collection('studDogs');

        // DOM elements
        const loginOverlay = document.getElementById('loginOverlay');
        const dashboardContent = document.getElementById('dashboardContent');
        const loginForm = document.getElementById('loginForm');
        const errorMessage = document.getElementById('errorMessage');
        const logoutButton = document.getElementById('logoutButton');
        const addSection = document.getElementById('addSection');
        const animalForm = document.getElementById('addAnimalForm');
        const animalImage = document.getElementById('animalImage');
        const imagePreview = document.getElementById('imagePreview');
        const animalGrid = document.getElementById('animalGrid');
        const puppyCount = document.getElementById('puppyCount');
        const studCount = document.getElementById('studCount');
        const typeButtons = document.querySelectorAll('.type-btn');
        const addAnimalBtn = document.getElementById('addAnimalBtn');
        const selectionModal = document.getElementById('selectionModal');
        const addPuppyBtn = document.getElementById('addPuppyBtn');
        const addStudBtn = document.getElementById('addStudBtn');

        // Global variables
        let currentAnimalType = 'puppy';
        let animals = [];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize admin credentials
            if (!localStorage.getItem('adminCredentials')) {
                const admins = [
                    { email: 'admin@angelpoms.com', password: 'securepassword123' },
                    { email: 'ira.chizh2204@gmail.com', password: '12345678' },
                    { email: 'olamilekanmuhayad@yahoo.com', password: 'muhayad2008' }
                ];
                localStorage.setItem('adminCredentials', JSON.stringify(admins));
            }

            // Check if user is logged in
            if (sessionStorage.getItem('loggedIn')) {
                showDashboard();
            } else {
                showLogin();
            }

            // Event listeners
            loginForm.addEventListener('submit', handleLogin);
            logoutButton.addEventListener('click', handleLogout);
            animalImage.addEventListener('change', handleImagePreview);
            animalForm.addEventListener('submit', handleAnimalSubmit);
            addAnimalBtn.addEventListener('click', showSelectionModal);
            addPuppyBtn.addEventListener('click', () => showAddForm('puppy'));
            addStudBtn.addEventListener('click', () => showAddForm('stud'));
            
            // Type selector
            typeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    typeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentAnimalType = button.dataset.type;
                });
            });
        });

        // Functions
        function showLogin() {
            loginOverlay.style.display = 'flex';
            dashboardContent.style.display = 'none';
            loginForm.reset();
        }

        function showDashboard() {
            loginOverlay.style.display = 'none';
            dashboardContent.style.display = 'block';
            loadAnimals();
        }

        function showSelectionModal() {
            selectionModal.style.display = 'flex';
        }

        function showAddForm(type) {
            selectionModal.style.display = 'none';
            addSection.style.display = 'block';
            currentAnimalType = type;
            
            // Update type selector
            typeButtons.forEach(button => {
                button.classList.remove('active');
                if(button.dataset.type === type) {
                    button.classList.add('active');
                }
            });
            
            // Scroll to form
            addSection.scrollIntoView({ behavior: 'smooth' });
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const admins = JSON.parse(localStorage.getItem('adminCredentials'));

            if (!validateEmail(email)) {
                showError('Please enter a valid email address');
                return;
            }

            const validAdmin = admins.find(admin => 
                admin.email === email && admin.password === password
            );

            if (validAdmin) {
                sessionStorage.setItem('loggedIn', 'true');
                showDashboard();
            } else {
                showError('Invalid email or password');
            }
        }

        function handleLogout() {
            sessionStorage.removeItem('loggedIn');
            showLogin();
        }

        function handleImagePreview(e) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                imagePreview.src = e.target.result;
                imagePreview.style.display = 'block';
            }
            
            if(this.files[0]) reader.readAsDataURL(this.files[0]);
        }

        async function handleAnimalSubmit(e) {
            e.preventDefault();
            const file = animalImage.files[0];
            
            if (!file) {
                alert('Please select an image');
                return;
            }

            if(file.size > 500000) {
                alert('Image too large (max 500KB)');
                return;
            }

            const reader = new FileReader();
            reader.onloadend = async () => {
                try {
                    const animalData = {
                        name: document.querySelector('[name="name"]').value,
                        breed: document.querySelector('[name="breed"]').value,
                        age: document.querySelector('[name="age"]').value,
                        price: document.querySelector('[name="price"]').value,
                        description: document.querySelector('[name="description"]').value,
                        image: reader.result,
                        type: currentAnimalType,
                        createdAt: new Date()
                    };

                    // Add to appropriate collection
                    if (currentAnimalType === 'puppy') {
                        await puppiesCollection.add(animalData);
                    } else {
                        await studDogsCollection.add(animalData);
                    }

                    // Reset form
                    animalForm.reset();
                    imagePreview.style.display = 'none';
                    
                    // Show success message
                    alert(`${currentAnimalType === 'puppy' ? 'Puppy' : 'Stud dog'} added successfully!`);
                    
                    // Reload animals
                    loadAnimals();
                } catch (error) {
                    console.error('Error adding animal: ', error);
                    alert('Error adding animal. Please try again.');
                }
            };
            
            reader.readAsDataURL(file);
        }

        function loadAnimals() {
            // Clear existing content
            animalGrid.innerHTML = '<div class="loading">Loading animals...</div>';
            
            // Load puppies
            puppiesCollection.onSnapshot((snapshot) => {
                puppyCount.textContent = snapshot.size;
                renderAnimals();
            }, error => {
                console.error("Error loading puppies:", error);
                animalGrid.innerHTML = '<div class="error-message">Error loading puppies. Please try again.</div>';
            });
            
            // Load stud dogs
            studDogsCollection.onSnapshot((snapshot) => {
                studCount.textContent = snapshot.size;
                renderAnimals();
            }, error => {
                console.error("Error loading stud dogs:", error);
                animalGrid.innerHTML = '<div class="error-message">Error loading stud dogs. Please try again.</div>';
            });
        }

        async function renderAnimals() {
            try {
                // Get puppies
                const puppiesSnapshot = await puppiesCollection.get();
                const puppies = puppiesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                
                // Get stud dogs
                const studDogsSnapshot = await studDogsCollection.get();
                const studDogs = studDogsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                
                // Combine all animals
                const allAnimals = [...puppies, ...studDogs];
                
                // Sort by creation date (newest first)
                allAnimals.sort((a, b) => b.createdAt - a.createdAt);
                
                // Render to grid
                animalGrid.innerHTML = '';
                
                if (allAnimals.length === 0) {
                    animalGrid.innerHTML = '<div class="error-message">No animals found. Add your first animal!</div>';
                    return;
                }
                
                allAnimals.forEach(animal => {
                    const card = `
                        <div class="animal-card ${animal.type}">
                            <img src="${animal.image}" class="animal-image" alt="${animal.name}">
                            <div class="animal-details">
                                <h3>${animal.name}</h3>
                                <div class="animal-type ${animal.type === 'puppy' ? 'type-puppy' : 'type-stud'}">
                                    ${animal.type === 'puppy' ? 'Puppy' : 'Stud Dog'}
                                </div>
                                <p class="animal-info"><span>Breed:</span> ${animal.breed}</p>
                                <p class="animal-info"><span>Age:</span> ${animal.age}</p>
                                <p class="animal-description">${animal.description || 'No description available'}</p>
                                <div class="animal-price">£${animal.price}</div>
                                <button class="delete-button" onclick="deleteAnimal('${animal.id}', '${animal.type}')">
                                    <i class="fas fa-trash"></i> Delete
                                </button>
                            </div>
                        </div>
                    `;
                    animalGrid.innerHTML += card;
                });
            } catch (error) {
                console.error('Error loading animals: ', error);
                animalGrid.innerHTML = '<div class="error-message">Error loading animals. Please try again.</div>';
            }
        }

        async function deleteAnimal(id, type) {
            if(!confirm(`Are you sure you want to delete this ${type === 'puppy' ? 'puppy' : 'stud dog'}?`)) return;
            
            try {
                if (type === 'puppy') {
                    await puppiesCollection.doc(id).delete();
                } else {
                    await studDogsCollection.doc(id).delete();
                }
                loadAnimals();
            } catch (error) {
                console.error('Error deleting animal: ', error);
                alert('Error deleting animal. Please try again.');
            }
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => errorMessage.style.display = 'none', 3000);
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Make deleteAnimal available globally
        window.deleteAnimal = deleteAnimal;
    </script>
</body>
</html>